var charset = {
  0: [
    "   xxx  ",
    "  x  xx ",
    " xx  xxx",
    " xx   xx",
    " xxx  xx",
    "  xx  x ",
    "   xxx  ",
    "        "
  ],
  1: [
    "    xx  ",
    "   xxx  ",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "  xxxxxx",
    "        ",
  ],
  2: [
    "  xxxxx ",
    " xx   xx",
    "     xxx",
    "   xxxx ",
    "  xxxx  ",
    " xxx    ",
    " xxxxxxx",
    "        "
  ],
  3: [
    "  xxxxxx",
    "     xx ",
    "    xx  ",
    "   xxxx ",
    "      xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  4: [
    "    xxx ",
    "   xxxx ",
    "  xx xx ",
    " xx  xx ",
    " xxxxxxx",
    "     xx ",
    "     xx ",
    "        "
  ],
  5: [
    " xxxxxx ",
    " x      ",
    " xxxxxx ",
    "      xx",
    "      xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  6: [
    "   xxxxx",
    "  xx    ",
    " xx     ",
    " xxxxxx ",
    " xx   xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  7: [
    " xxxxxxx",
    " xx   xx",
    "     xx ",
    "    xx  ",
    "   xx   ",
    "   xx   ",
    "   xx   ",
    "        "
  ],
  8: [
    "  xxxxx ",
    " xx   xx",
    " xx   xx",
    "  xxxxx ",
    " xx   xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  9: [
    "  xxxxx ",
    " xx   xx",
    " xx   xx",
    "  xxxxxx",
    "      xx",
    "     xx ",
    "  xxxx  ",
    "        "
  ],
  A: [
    "   xxx  ",
    "  xx xx ",
    " xx   xx",
    " xx   xx",
    " xxxxxxx",
    " xx   xx",
    " xx   xx",
    "        "
  ],
  B: [
    " xxxxxx ",
    " xx   xx",
    " xx   xx",
    " xxxxxx ",
    " xx   xx",
    " xx   xx",
    " xxxxxx "
  ],
  C: [
    "   xxxx ",
    "  xx  xx",
    " xx     ",
    " xx     ",
    " xx     ",
    "  xx  xx",
    "   xxxx ",
    "        "
  ],
  D: [
    " xxxxx  ",
    " xx  xx ",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx  xx ",
    " xxxxx  ",
    "        "
  ],
  E: [
    "  xxxxxx",
    "  xx    ",
    "  xx    ",
    "  xxxxx ",
    "  xx    ",
    "  xx    ",
    "  xxxxxx",
    "        "
  ],
  F: [
    " xxxxxxx",
    " xx     ",
    " xx     ",
    " xxxxxx ",
    " xx     ",
    " xx     ",
    " xx     ",
    "        "
  ],
  G: [
    "   xxxxx",
    "  xx    ",
    " xx     ",
    " xx  xxx",
    " xx   xx",
    "  xx  xx",
    "   xxxxx",
    "        "
  ],
  H: [
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xxxxxxx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    "        "
  ],
  I: [
    "  xxxxxx",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "  xxxxxx",
    "        "
  ],
  J: [
    "      xx",
    "      xx",
    "      xx",
    "      xx",
    "      xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  K: [
    " xx   xx",
    " xx  xx ",
    " xx xx  ",
    " xxxx   ",
    " xxxxx  ",
    " xx xxx ",
    " xx  xxx",
    "        "
  ],
  L: [
    " xx     ",
    " xx     ",
    " xx     ",
    " xx     ",
    " xx     ",
    " xx     ",
    " xxxxxxx",
    "        "
  ],
  M: [
    " xx   xx",
    " xxx xxx",
    " xxxxxxx",
    " xxxxxxx",
    " xx x xx",
    " xx   xx",
    " xx   xx",
    "        "
  ],
  N: [
    " xx   xx",
    " xxx  xx",
    " xxxx xx",
    " xxxxxxx",
    " xx xxxx",
    " xx  xxx",
    " xx   xx",
    "        "
  ],
  O: [
    "  xxxxx ",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  P: [
    " xxxxxx ",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xxxxxx ",
    " xx     ",
    " xx     ",
    "        "
  ],
  Q: [
    "  xxxxx ",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx xxxx",
    " xx  xx ",
    "  xxxx x",
    "        "
  ],
  R: [
    " xxxxxx ",
    " xx   xx",
    " xx   xx",
    " xx  xxx",
    " xxxxx  ",
    " xx xxx ",
    " xx  xxx",
    "        "
  ],
  S: [
    "  xxxx  ",
    " xx  xx ",
    " xx     ",
    "  xxxxx ",
    "      xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  T: [
    " xxxxxx ",
    "   xx   ",
    "   xx   ",
    "   xx   ",
    "   xx   ",
    "   xx   ",
    "   xx   ",
    "        "
  ],
  U: [
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xx   xx",
    "  xxxxx ",
    "        "
  ],
  V: [
    " xx   xx",
    " xx   xx",
    " xx   xx",
    " xxx xxx",
    "  xxxxx ",
    "   xxx  ",
    "    x   ",
    "        "
  ],
  W: [
    " xx   xx",
    " xx   xx",
    " xx x xx",
    " xxxxxxx",
    " xxxxxxx",
    " xxx xxx",
    " xx   xx",
    "        "
  ],
  X: [
    " xx   xx",
    " xxx xxx",
    "  xxxxx ",
    "   xxx  ",
    "  xxxxx ",
    " xxx xxx",
    " xx   xx",
    "        "
  ],
  Y: [
    "  xx  xx",
    "  xx  xx",
    "  xx  xx",
    "   xxxx ",
    "    xx  ",
    "    xx  ",
    "    xx  ",
    "        ",
  ],
  Z: [
    " xxxxxxx",
    "     xxx",
    "    xxx ",
    "   xxx  ",
    "  xxx   ",
    " xxx    ",
    " xxxxxxx",
    "        "
  ],
  "!": [
    "    xxx ",
    "    xxx ",
    "   xxx  ",
    "   xx   ",
    "   x    ",
    "        ",
    "  x     ",
    "        "
  ]
}

for(var prop in charset) {
  if(charset.hasOwnProperty(prop)) {
    charset[prop] = charset[prop].map(function(row) {
      return row.split("");
    });
  }
}

var START_BOARD = [
  "xxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "x............xx............x",
  "x.xxxx.xxxxx.xx.xxxxx.xxxx.x",
  "xoxxxx.xxxxx.xx.xxxxx.xxxxox",
  "x.xxxx.xxxxx.xx.xxxxx.xxxx.x",
  "x..........................x",
  "x.xxxx.xx.xxxxxxxx.xx.xxxx.x",
  "x.xxxx.xx.xxxxxxxx.xx.xxxx.x",
  "x......xx....xx....xx......x",
  "xxxxxx.xxxxx xx xxxxx.xxxxxx",
  "     x.xxxxx xx xxxxx.x     ",
  "     x.xx    b     xx.x     ",
  "     x.xx xxx--xxx xx.x     ",
  "xxxxxx.xx x      x xx.xxxxxx",
  "      .   xi p c x   .      ",
  "xxxxxx.xx x      x xx.xxxxxx",
  "     x.xx xxxxxxxx xx.x     ",
  "     x.xx          xx.x     ",
  "     x.xx xxxxxxxx xx.x     ",
  "xxxxxx.xx xxxxxxxx xx.xxxxxx",
  "x............xx............x",
  "x.xxxx.xxxxx.xx.xxxxx.xxxx.x",
  "x.xxxx.xxxxx.xx.xxxxx.xxxx.x",
  "xo..xx.......m .......xx..ox",
  "xxx.xx.xx.xxxxxxxx.xx.xx.xxx",
  "xxx.xx.xx.xxxxxxxx.xx.xx.xxx",
  "x......xx....xx....xx......x",
  "x.xxxxxxxxxx.xx.xxxxxxxxxx.x",
  "x.xxxxxxxxxx.xx.xxxxxxxxxx.x",
  "x..........................x",
  "xxxxxxxxxxxxxxxxxxxxxxxxxxxx"
];

var keyCodes = {
  37: "left",
  38: "up",
  39: "right",
  40: "down"
}

var nameToColor = {
  b: "#F00",
  i: "#4FF",
  p: "#FCF",
  c: "#FA6",
  m: "#FF0"
}

var noteToFreq = function(note, octave){
  var letterToLowest = {
    c: 16.35,
    db: 17.32,
    d: 18.35,
    eb: 19.45,
    e: 20.60,
    f: 21.83,
    gb: 23.12,
    g: 24.50,
    ab: 25.96,
    a: 27.50,
    bb: 29.14,
    b: 30.87
  }
  return Math.pow(2, octave) * letterToLowest[note];
}

var BOARD_HEIGHT = 288;
var BOARD_WIDTH = 224;
var VERT_TILES = BOARD_HEIGHT / 8;
var HORIZ_TILES = BOARD_WIDTH / 8;
var PAC_MOVE_DELAY = 20;
var GHOST_MOVE_DELAY = 20;
var GHOST_TENDRIL_DELAY = 200;
var HOUSE_TOP = 128;
var HOUSE_BOTTOM = 152;
var INKY_EXIT_DELAY = 2000;
var CLYDE_EXIT_DELAY = 4000;

var PELLET_COLOR = "#FCF";

var GHOST_MODES = [
  "house",
  "exitting",
  "scatter",
  "chase",
  "frightened"
];

var oppositeDirection = function(direction) {
  switch(direction) {
    case "up": return "down"; break;
    case "down": return "up"; break;
    case "left": return "right"; break;
    case "right": return "left"; break;
  }
}
